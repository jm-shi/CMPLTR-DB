<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href={{#if back}}{{back}}{{else}}"javascript:history.back()"{{/if}}>
    {{#if noBackBtn}}
    {{else}}
    <i class="fas fa-long-arrow-alt-left fa-2x"></i>
    {{/if}}
  </a>

  <span class="mx-auto navbar-brand">{{navbarTitle}}</span>
  {{#if noDropdown}}
  {{else}}
  <div class="nav-item dropdown">
    <a class="navbar-brand dropdown-toggle " href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
      aria-haspopup="true" aria-expanded="false">
      <i class="fas fa-user-circle fa-2x"></i>
    </a>

    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
      <div id="welcome" class="dropdown-item disabled">
        <strong id="welcomeName">
          Welcome,
          {{#if firstName}}
          {{firstName}}
          {{else}}
          Anonymous
          {{/if}}
        </strong>
      </div>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="/home">Home</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="/profile">Profile</a>
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="/help">Help</a>
      <div class="dropdown-divider"></div>
      {{#if userSignedIn}}
      <a class="dropdown-item" onclick="logout()">Logout</a>
      {{else}}
      <a id="login" class="dropdown-item" onclick="logout()">Login</a>
      {{/if}}
    </div>
  </div>
  {{/if}}
</nav>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script>
  const loggedIn = localStorage.getItem("email");
  if (loggedIn === null) {
    $("#id").val("logout");
  } else {
    const userFirstName = localStorage.getItem("first_name");
    if (userFirstName !== null) {
      $("#welcomeName").val(`Welcome, ${userFirstName}`);
    }
  }

  // const localStorage = window.localStorage;
  // const id = localStorage.getItem('id');
  // const picture = localStorage.getItem('picture');
  // const name = localStorage.getItem('name');
  // const first_name = localStorage.getItem('first_name');
  // const email = localStorage.getItem('email');
  // if (first_name && document.getElementById('welcome')) {
  //   document.getElementById('welcome').innerHTML = `<strong>Welcome, ${first_name}</strong>`;
  // }

  function logout() {
    window.localStorage.clear();
    window.location.href = "/logout";
  }
</script>